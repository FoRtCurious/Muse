@model Models.UserMusics
@{
    ViewBag.Title = "发布活动";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Css{
    <link href="~/Content/css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/css/upsource.css" rel="stylesheet" />
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
}

@*<script >
    function publish(data) {
        if (data == "success") {
            window.location = '../../Camp/Publish';
        }
        else {
            alert('发布失败！');
        }
        
    }
</script>*@

<div class="container box">
    @*@using (Ajax.BeginForm("Publish", "Camp", new AjaxOptions() { HttpMethod = "post", OnSuccess = "publish" }))*@
@using (Html.BeginForm("Publish", "Camp", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)
        <div>
            <div class="well">
                <a href="#" id="example" class="btn btn-danger" rel="popover" data-content="这将直接影响您的歌曲审核情况" data-original-title="请仔细阅读原创审核标准">
                    <span class="glyphicon glyphicon-warning-sign"> 活动发布准则(必看)</span>
                </a><br>
                1.请遵守当地法律法规。<br>
                &nbsp; 1.1任何违反当地法律法规的行为都将被移送当地法律机构面临法律问题。 <br >
                &nbsp; 1.2活动不允许具有强烈的广告性质。<br>
                &nbsp; 1.3<span class="color-red">请注意隐私的保护。 </span>   <br>
                2.引用他人的活动内容进行二度创作的活动请标明原创活动来源。<br>
                3.不能上传他人活动作为自己的活动。<br>
                4.禁止任何人身攻击的行为言论。。<br>
                5.活动信息中请勿涉及政治、广告、色情、暴力、低俗等违规内容，违反者直接删除内容。多次违反将封号。请不要对红歌进行任何的改编。
            </div>
        </div>
        <script>
            $(function (){
	            $("#example").popover();
            });
        </script>
        <hr>
        <hr>

        @*歌曲信息*@
        <h4>填写活动信息  </h4>
        <br>
        <div class="row clearfix" style="min-height:200px; ">
            <div class="col-md-12 column" style="min-height:100px; overflow-y:hidden ;">
                <table class="table">
                    <tbody>
                        <tr>
                            <td valign="middle">
                                <em class="up_file_red">*</em>活动宣传图：（最佳尺寸：960×268）   @*数据库 image_url*@
                            </td>
                            <td>
                                <label for="id_avatar1">
                                    <img id="avatar-img1" src="~/Content/images/load/upImg.png" style="width:100px;height:100px;">
                                </label>
                                <input type="file" name="activeImg" id="id_avatar1" style="width:65px;" required accept=".jpg,.png,.gif,.bmp">
                                <span class="help-block"></span>
                            </td>
                        </tr>

                        <tr class="table">
                            <td style="width:100px">
                                <em class="up_file_red">*</em>活动名称:    @*数据库   11111    actname*@
                            </td>
                            <td>
                                <input type="text" class="form-control" id="actname" name="actname" placeholder="请阅读《活动名称审核标准》" required>
                            </td>
                        </tr>
                    
                        <tr class="table">
                            <td style="height:20px;line-height:20px;">
                                <em class="up_file_red">*</em>活动发起人:   @*数据库 Holder*@
                            </td>
                            <td>
                                <input type="text" class="form-control" value="@Session["Username"]" readonly="readonly">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <em class="up_file_red">*</em>活动描述:   @*数据库 11111   actinfo*@      
                            </td>
                            <td>
                                <input type="text" class="form-control"  id="actinfo" name="actinfo"  placeholder="请详细描述活动的内容，这将影响到其他用户的参与情况。">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <em class="up_file_red">*</em>原创报名方式:       @*数据库     111111   orienroll*@ 
                            </td>
                            <td>
                                <input type="text" class="form-control" id="orienroll" name="orienroll"  placeholder="请选填：(留白将影响用户参与情况)">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <em class="up_file_red">*</em>其他报名方式:    @*数据库  1111   recenroll*@
                            </td>
                            <td>
                                <input type="text" class="form-control"  id="recenroll" name="recenroll"  placeholder="请选填：(留白将影响用户参与情况)">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <em class="up_file_red">*</em>活动类型:   @*数据库 Location*@
                            </td>
                            <td>
                                <div><input type="text" class="form-control" id="location" name="location"    placeholder="单选，请填入选项前的罗马数字："></div>
                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                <div class="hp_jobs hp_language">
                                    <ul>
                                        <li><a href="###yc" title="点击选中">1：户外</a></li>
                                        <li><a href="###yc" title="点击选中">2：线上</a></li>
                                        <li><a href="###yc" title="点击选中">3：融合</a></li>                                      
                                    </ul>
                                </div>
                            </td>
                        </tr>                   
                        <tr>
                            <td>
                                <em class="up_file_red">*</em>截止时间:  @*数据库  DDLine*@
                            </td>
                            <td>
                                <textarea  class="form-control" id="ddline" name="ddline"   placeholder="参考格式：2020-12-30"></textarea>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
            @*歌曲设置*@
            <h4>参与活动的歌曲设置</h4>
            <div class="row clearfix" style="height :180px;">
                <div class="col-md-2 column">
                </div>
                <div class="col-md-10 column" style="height :130px ;">
                    <strong>下载设置：  </strong>
                    <input id="dowmload" name="download" type="radio" checked="checked" />不许下载
                    <input id="dowmload" name="download" type="radio" />免费下载
                    <input id="dowmload" name="download" type="radio" />付费下载
                    <br>
                    <div class="checkbox">
                        <label><input type="checkbox" required />我已阅读并同意：<a href="~/Views/UploadOriginal/Index.cshtml">《授权协议》</a></label>
                    </div>
                    <button type="submit" class="btn btn-default" style="height:50px; width:250px;background-color:forestgreen;color:white;">发布并递交审核</button>
                </div>
            </div>
    }
</div>

<script>
    // 找到头像的input标签绑定change事件
    $("#id_avatar").change(function () {
        // 1. 创建一个读取文件的对象
        var fileReader = new FileReader();
        // 取到当前选中的头像文件
        // console.log(this.files[0]);
        // 读取你选中的那个文件
        fileReader.readAsDataURL(this.files[0]);  // 读取文件是需要时间的
        fileReader.onload = function () {
            // 2. 等上一步读完文件之后才 把图片加载到img标签中
            $("#avatar-img").attr("src", fileReader.result);
        };
    });
    // 找到头像的input标签绑定change事件
    $("#id_avatar1").change(function () {
        // 1. 创建一个读取文件的对象
        var fileReader = new FileReader();
        // 取到当前选中的头像文件
        // console.log(this.files[0]);
        // 读取你选中的那个文件
        fileReader.readAsDataURL(this.files[0]);  // 读取文件是需要时间的
        fileReader.onload = function () {
            // 2. 等上一步读完文件之后才 把图片加载到img标签中
            $("#avatar-img1").attr("src", fileReader.result);
        };
    });
</script>
